(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{RGbi:function(l,n,u){"use strict";u.r(n);var t=u("8Y7J"),e=u("yZrb");class o{constructor(l,n,u){this.api=l,this.route=n,this.router=u,this.messages=[],this.chatKeys=[],this.loader=!0,this.route.queryParamMap.subscribe(l=>{this.user=l.params,this.getChat()}),this.userType=this.api.admin?"admin":"user"}ngOnInit(){}goBack(){this.router.navigate(["/home"],{skipLocationChange:!1})}logout(){console.log("lgout"),this.api.signOut()}sendChat(){this.chat&&console.log(this.chat),this.chat&&this.api.sendMsg(this.user.id,this.chat,this.userType),this.chat=""}getChat(){console.log("get chat",this.user.id),this.unsubscribe=this.api.db.collection("chatRoom").where("id","==",this.user.id).onSnapshot(l=>{this.loader=!1,l.forEach(l=>{let n=l.data();this.chatKeys.indexOf(n.key)<0&&(this.messages.push(n),this.chatKeys.push(n.key)),console.log(l.data())}),this.messages.sort(this.sortDate)})}sortDate(l,n){return new Date(l.timestamp.toDate())>new Date(n.timestamp.toDate())?1:-1}ionViewWillLeave(){this.api.admin&&this.unsubscribe(),console.log("unsubscribe successfully")}}class i{}var s=u("pMnS"),a=u("oBZk"),c=u("ZZ/e"),b=u("SVse"),r=u("s7LF"),h=u("iInd"),g=t.rb({encapsulation:0,styles:[["ion-card[_ngcontent-%COMP%]{width:80%}[flow-right][_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-flow:row-reverse}[bg-sky][_ngcontent-%COMP%]{--background:#f8fafa}[bg-white][_ngcontent-%COMP%]{--background:#fff;--color:#000}[bg-light][_ngcontent-%COMP%]{--background:#cfebb1;--color:#000}[light-time][_ngcontent-%COMP%]{color:#6a6a6a;font-size:.7rem;padding:5px}"]],data:{}});function d(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,2,"ion-icon",[["name","arr ow-round-back"],["padding",""],["slot","start"],["style","padding-right: 0px"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.goBack()&&t),t}),a.x,a.h)),t.sb(1,49152,null,0,c.A,[t.h,t.k,t.y],{name:[0,"name"]},null),t.sb(2,16384,null,0,c.c,[t.k],null,null)],(function(l,n){l(n,1,0,"arr ow-round-back")}),null)}function p(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,2,"ion-icon",[["name","more"],["padding",""],["slot","end"]],null,null,null,a.x,a.h)),t.sb(1,49152,null,0,c.A,[t.h,t.k,t.y],{name:[0,"name"]},null),t.sb(2,16384,null,0,c.c,[t.k],null,null)],(function(l,n){l(n,1,0,"more")}),null)}function m(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,2,"ion-icon",[["name","log-out"],["padding",""],["slot","end"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.logout()&&t),t}),a.x,a.h)),t.sb(1,49152,null,0,c.A,[t.h,t.k,t.y],{name:[0,"name"]},null),t.sb(2,16384,null,0,c.c,[t.k],null,null)],(function(l,n){l(n,1,0,"log-out")}),null)}function k(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,5,"div",[["flex",""],["flow-right",""]],null,null,null,null,null)),(l()(),t.tb(1,0,null,null,4,"ion-card",[["bg-light",""]],null,null,null,a.t,a.c)),t.sb(2,49152,null,0,c.k,[t.h,t.k,t.y],null,null),(l()(),t.tb(3,0,null,0,2,"ion-card-content",[["style","padding-bottom: 0px;"]],null,null,null,a.s,a.d)),t.sb(4,49152,null,0,c.l,[t.h,t.k,t.y],null,null),(l()(),t.Jb(5,0,[" "," "]))],null,(function(l,n){l(n,5,0,n.parent.context.$implicit.msg)}))}function f(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,5,"div",[["flex",""]],null,null,null,null,null)),(l()(),t.tb(1,0,null,null,4,"ion-card",[["bg-white",""]],null,null,null,a.t,a.c)),t.sb(2,49152,null,0,c.k,[t.h,t.k,t.y],null,null),(l()(),t.tb(3,0,null,0,2,"ion-card-content",[["style","padding-bottom: 0px;"]],null,null,null,a.s,a.d)),t.sb(4,49152,null,0,c.l,[t.h,t.k,t.y],null,null),(l()(),t.Jb(5,0,[" "," "]))],null,(function(l,n){l(n,5,0,n.parent.context.$implicit.msg)}))}function y(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.ib(16777216,null,null,1,null,k)),t.sb(2,16384,null,0,b.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ib(16777216,null,null,1,null,f)),t.sb(4,16384,null,0,b.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,n.context.$implicit.type==u.userType),l(n,4,0,n.context.$implicit.type!=u.userType)}),null)}function C(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,2,"div",[["flex",""],["h-center",""],["style","height: 100%;"],["v-center",""]],null,null,null,null,null)),(l()(),t.tb(1,0,null,null,1,"ion-spinner",[["color","success"],["name","crescent"],["style","width: 100px; height: 100px;"]],null,null,null,a.D,a.n)),t.sb(2,49152,null,0,c.qb,[t.h,t.k,t.y],{color:[0,"color"],name:[1,"name"]},null)],(function(l,n){l(n,2,0,"success","crescent")}),null)}function v(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,23,"ion-header",[],null,null,null,a.w,a.g)),t.sb(1,49152,null,0,c.z,[t.h,t.k,t.y],null,null),(l()(),t.tb(2,0,null,0,21,"ion-toolbar",[["_bg-theme-color",""],["style","background-color: #1e2023"]],null,null,null,a.F,a.p)),t.sb(3,49152,null,0,c.Ab,[t.h,t.k,t.y],null,null),(l()(),t.ib(16777216,null,0,1,null,d)),t.sb(5,16384,null,0,b.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(6,0,null,0,3,"ion-avatar",[["padding",""],["slot","start"]],null,null,null,a.r,a.b)),t.sb(7,49152,null,0,c.e,[t.h,t.k,t.y],null,null),t.sb(8,16384,null,0,c.c,[t.k],null,null),(l()(),t.tb(9,0,null,0,0,"img",[["src","../../../assets/imgs/avatar/avatar9.jpg"]],null,null,null,null,null)),(l()(),t.tb(10,0,null,0,3,"ion-title",[["no-padding",""]],null,null,null,a.E,a.o)),t.sb(11,49152,null,0,c.yb,[t.h,t.k,t.y],null,null),t.sb(12,16384,null,0,c.c,[t.k],null,null),(l()(),t.Jb(13,0,["",""])),(l()(),t.tb(14,0,null,0,2,"ion-icon",[["name","videocam"],["padding",""],["slot","end"]],null,null,null,a.x,a.h)),t.sb(15,49152,null,0,c.A,[t.h,t.k,t.y],{name:[0,"name"]},null),t.sb(16,16384,null,0,c.c,[t.k],null,null),(l()(),t.tb(17,0,null,0,2,"ion-icon",[["name","call"],["padding",""],["slot","end"]],null,null,null,a.x,a.h)),t.sb(18,49152,null,0,c.A,[t.h,t.k,t.y],{name:[0,"name"]},null),t.sb(19,16384,null,0,c.c,[t.k],null,null),(l()(),t.ib(16777216,null,0,1,null,p)),t.sb(21,16384,null,0,b.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ib(16777216,null,0,1,null,m)),t.sb(23,16384,null,0,b.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(24,0,null,null,5,"ion-content",[["bg-sky",""]],null,null,null,a.u,a.e)),t.sb(25,49152,null,0,c.s,[t.h,t.k,t.y],null,null),(l()(),t.ib(16777216,null,0,1,null,y)),t.sb(27,278528,null,0,b.j,[t.O,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ib(16777216,null,0,1,null,C)),t.sb(29,16384,null,0,b.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(30,0,null,null,16,"ion-footer",[],null,null,null,a.v,a.f)),t.sb(31,49152,null,0,c.x,[t.h,t.k,t.y],null,null),(l()(),t.tb(32,0,null,0,14,"ion-toolbar",[],null,null,null,a.F,a.p)),t.sb(33,49152,null,0,c.Ab,[t.h,t.k,t.y],null,null),(l()(),t.tb(34,0,null,0,2,"div",[["padding",""],["slot","start"]],null,null,null,null,null)),t.sb(35,16384,null,0,c.c,[t.k],null,null),(l()(),t.Jb(-1,null,[" \u{1f600} "])),(l()(),t.tb(37,0,null,0,6,"ion-input",[["placeholder","Type here..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0,o=l.component;return"ionBlur"===n&&(e=!1!==t.Eb(l,38)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==t.Eb(l,38)._handleInputEvent(u.target)&&e),"ngModelChange"===n&&(e=!1!==(o.chat=u)&&e),e}),a.z,a.j)),t.sb(38,16384,null,0,c.Jb,[t.k],null,null),t.Gb(1024,null,r.k,(function(l){return[l]}),[c.Jb]),t.sb(40,671744,null,0,r.p,[[8,null],[8,null],[8,null],[6,r.k]],{model:[0,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,r.l,null,[r.p]),t.sb(42,16384,null,0,r.m,[[4,r.l]],null,null),t.sb(43,49152,null,0,c.E,[t.h,t.k,t.y],{placeholder:[0,"placeholder"]},null),(l()(),t.tb(44,0,null,0,2,"ion-icon",[["name","send"],["padding",""],["slot","end"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.sendChat()&&t),t}),a.x,a.h)),t.sb(45,49152,null,0,c.A,[t.h,t.k,t.y],{name:[0,"name"]},null),t.sb(46,16384,null,0,c.c,[t.k],null,null)],(function(l,n){var u=n.component;l(n,5,0,u.api.admin),l(n,15,0,"videocam"),l(n,18,0,"call"),l(n,21,0,u.api.admin),l(n,23,0,!u.api.admin),l(n,27,0,u.messages),l(n,29,0,u.loader),l(n,40,0,u.chat),l(n,43,0,"Type here..."),l(n,45,0,"send")}),(function(l,n){var u=n.component;l(n,13,0,null==u.user?null:u.user.name),l(n,37,0,t.Eb(n,42).ngClassUntouched,t.Eb(n,42).ngClassTouched,t.Eb(n,42).ngClassPristine,t.Eb(n,42).ngClassDirty,t.Eb(n,42).ngClassValid,t.Eb(n,42).ngClassInvalid,t.Eb(n,42).ngClassPending)}))}function x(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,1,"app-chat-room",[],null,null,null,v,g)),t.sb(1,114688,null,0,o,[e.a,h.a,h.m],null,null)],(function(l,n){l(n,1,0)}),null)}var w=t.pb("app-chat-room",o,x,{},{},[]);u.d(n,"ChatRoomPageModuleNgFactory",(function(){return L}));var L=t.qb(i,[],(function(l){return t.Bb([t.Cb(512,t.j,t.bb,[[8,[s.a,w]],[3,t.j],t.w]),t.Cb(4608,b.m,b.l,[t.t,[2,b.x]]),t.Cb(4608,r.t,r.t,[]),t.Cb(4608,c.a,c.a,[t.y,t.g]),t.Cb(4608,c.Eb,c.Eb,[c.a,t.j,t.q]),t.Cb(4608,c.Hb,c.Hb,[c.a,t.j,t.q]),t.Cb(1073742336,b.c,b.c,[]),t.Cb(1073742336,r.s,r.s,[]),t.Cb(1073742336,r.i,r.i,[]),t.Cb(1073742336,c.Cb,c.Cb,[]),t.Cb(1073742336,h.p,h.p,[[2,h.u],[2,h.m]]),t.Cb(1073742336,i,i,[]),t.Cb(1024,h.k,(function(){return[[{path:"",component:o}]]}),[])])}))}}]);