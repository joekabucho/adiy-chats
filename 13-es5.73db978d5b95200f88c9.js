(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{RGbi:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=u("yZrb"),o=function(){function l(l,n,u){var t=this;this.api=l,this.route=n,this.router=u,this.messages=[],this.chatKeys=[],this.loader=!0,this.route.queryParamMap.subscribe((function(l){t.user=l.params,t.getChat()})),this.userType=this.api.admin?"admin":"user"}return l.prototype.ngOnInit=function(){},l.prototype.goBack=function(){this.router.navigate(["/home"],{skipLocationChange:!1})},l.prototype.logout=function(){console.log("lgout"),this.api.signOut()},l.prototype.sendChat=function(){this.chat&&console.log(this.chat),this.chat&&this.api.sendMsg(this.user.id,this.chat,this.userType),this.chat=""},l.prototype.getChat=function(){var l=this;console.log("get chat",this.user.id),this.unsubscribe=this.api.db.collection("chatRoom").where("id","==",this.user.id).onSnapshot((function(n){l.loader=!1,n.forEach((function(n){var u=n.data();l.chatKeys.indexOf(u.key)<0&&(l.messages.push(u),l.chatKeys.push(u.key)),console.log(n.data())})),l.messages.sort(l.sortDate)}))},l.prototype.sortDate=function(l,n){return new Date(l.timestamp.toDate())>new Date(n.timestamp.toDate())?1:-1},l.prototype.ionViewWillLeave=function(){this.api.admin&&this.unsubscribe(),console.log("unsubscribe successfully")},l}(),i=function(){return function(){}}(),a=u("pMnS"),c=u("oBZk"),r=u("ZZ/e"),b=u("Ip0R"),s=u("gIcY"),h=u("ZYCi"),g=t.ub({encapsulation:0,styles:[["ion-card[_ngcontent-%COMP%]{width:80%}[flow-right][_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-flow:row-reverse}[bg-sky][_ngcontent-%COMP%]{--background:#f8fafa}[bg-white][_ngcontent-%COMP%]{--background:#fff;--color:#000}[bg-light][_ngcontent-%COMP%]{--background:#cfebb1;--color:#000}[light-time][_ngcontent-%COMP%]{color:#6a6a6a;font-size:.7rem;padding:5px}"]],data:{}});function d(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,2,"ion-icon",[["name","arr ow-round-back"],["padding",""],["slot","start"],["style","padding-right: 0px"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.goBack()&&t),t}),c.x,c.h)),t.vb(1,49152,null,0,r.A,[t.h,t.k,t.B],{name:[0,"name"]},null),t.vb(2,16384,null,0,r.c,[t.k],null,null)],(function(l,n){l(n,1,0,"arr ow-round-back")}),null)}function p(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,2,"ion-icon",[["name","more"],["padding",""],["slot","end"]],null,null,null,c.x,c.h)),t.vb(1,49152,null,0,r.A,[t.h,t.k,t.B],{name:[0,"name"]},null),t.vb(2,16384,null,0,r.c,[t.k],null,null)],(function(l,n){l(n,1,0,"more")}),null)}function f(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,2,"ion-icon",[["name","log-out"],["padding",""],["slot","end"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.logout()&&t),t}),c.x,c.h)),t.vb(1,49152,null,0,r.A,[t.h,t.k,t.B],{name:[0,"name"]},null),t.vb(2,16384,null,0,r.c,[t.k],null,null)],(function(l,n){l(n,1,0,"log-out")}),null)}function m(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,5,"div",[["flex",""],["flow-right",""]],null,null,null,null,null)),(l()(),t.wb(1,0,null,null,4,"ion-card",[["bg-light",""]],null,null,null,c.t,c.c)),t.vb(2,49152,null,0,r.k,[t.h,t.k,t.B],null,null),(l()(),t.wb(3,0,null,0,2,"ion-card-content",[["style","padding-bottom: 0px;"]],null,null,null,c.s,c.d)),t.vb(4,49152,null,0,r.l,[t.h,t.k,t.B],null,null),(l()(),t.Mb(5,0,[" "," "]))],null,(function(l,n){l(n,5,0,n.parent.context.$implicit.msg)}))}function v(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,5,"div",[["flex",""]],null,null,null,null,null)),(l()(),t.wb(1,0,null,null,4,"ion-card",[["bg-white",""]],null,null,null,c.t,c.c)),t.vb(2,49152,null,0,r.k,[t.h,t.k,t.B],null,null),(l()(),t.wb(3,0,null,0,2,"ion-card-content",[["style","padding-bottom: 0px;"]],null,null,null,c.s,c.d)),t.vb(4,49152,null,0,r.l,[t.h,t.k,t.B],null,null),(l()(),t.Mb(5,0,[" "," "]))],null,(function(l,n){l(n,5,0,n.parent.context.$implicit.msg)}))}function k(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),t.lb(16777216,null,null,1,null,m)),t.vb(2,16384,null,0,b.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.lb(16777216,null,null,1,null,v)),t.vb(4,16384,null,0,b.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,n.context.$implicit.type==u.userType),l(n,4,0,n.context.$implicit.type!=u.userType)}),null)}function w(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,2,"div",[["flex",""],["h-center",""],["style","height: 100%;"],["v-center",""]],null,null,null,null,null)),(l()(),t.wb(1,0,null,null,1,"ion-spinner",[["color","success"],["name","crescent"],["style","width: 100px; height: 100px;"]],null,null,null,c.D,c.n)),t.vb(2,49152,null,0,r.qb,[t.h,t.k,t.B],{color:[0,"color"],name:[1,"name"]},null)],(function(l,n){l(n,2,0,"success","crescent")}),null)}function y(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,23,"ion-header",[],null,null,null,c.w,c.g)),t.vb(1,49152,null,0,r.z,[t.h,t.k,t.B],null,null),(l()(),t.wb(2,0,null,0,21,"ion-toolbar",[["_bg-theme-color",""],["style","background-color: #1e2023"]],null,null,null,c.F,c.p)),t.vb(3,49152,null,0,r.Ab,[t.h,t.k,t.B],null,null),(l()(),t.lb(16777216,null,0,1,null,d)),t.vb(5,16384,null,0,b.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.wb(6,0,null,0,3,"ion-avatar",[["padding",""],["slot","start"]],null,null,null,c.r,c.b)),t.vb(7,49152,null,0,r.e,[t.h,t.k,t.B],null,null),t.vb(8,16384,null,0,r.c,[t.k],null,null),(l()(),t.wb(9,0,null,0,0,"img",[["src","../../../assets/imgs/avatar/avatar9.jpg"]],null,null,null,null,null)),(l()(),t.wb(10,0,null,0,3,"ion-title",[["no-padding",""]],null,null,null,c.E,c.o)),t.vb(11,49152,null,0,r.yb,[t.h,t.k,t.B],null,null),t.vb(12,16384,null,0,r.c,[t.k],null,null),(l()(),t.Mb(13,0,["",""])),(l()(),t.wb(14,0,null,0,2,"ion-icon",[["name","videocam"],["padding",""],["slot","end"]],null,null,null,c.x,c.h)),t.vb(15,49152,null,0,r.A,[t.h,t.k,t.B],{name:[0,"name"]},null),t.vb(16,16384,null,0,r.c,[t.k],null,null),(l()(),t.wb(17,0,null,0,2,"ion-icon",[["name","call"],["padding",""],["slot","end"]],null,null,null,c.x,c.h)),t.vb(18,49152,null,0,r.A,[t.h,t.k,t.B],{name:[0,"name"]},null),t.vb(19,16384,null,0,r.c,[t.k],null,null),(l()(),t.lb(16777216,null,0,1,null,p)),t.vb(21,16384,null,0,b.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.lb(16777216,null,0,1,null,f)),t.vb(23,16384,null,0,b.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.wb(24,0,null,null,5,"ion-content",[["bg-sky",""]],null,null,null,c.u,c.e)),t.vb(25,49152,null,0,r.s,[t.h,t.k,t.B],null,null),(l()(),t.lb(16777216,null,0,1,null,k)),t.vb(27,278528,null,0,b.j,[t.R,t.O,t.u],{ngForOf:[0,"ngForOf"]},null),(l()(),t.lb(16777216,null,0,1,null,w)),t.vb(29,16384,null,0,b.k,[t.R,t.O],{ngIf:[0,"ngIf"]},null),(l()(),t.wb(30,0,null,null,16,"ion-footer",[],null,null,null,c.v,c.f)),t.vb(31,49152,null,0,r.x,[t.h,t.k,t.B],null,null),(l()(),t.wb(32,0,null,0,14,"ion-toolbar",[],null,null,null,c.F,c.p)),t.vb(33,49152,null,0,r.Ab,[t.h,t.k,t.B],null,null),(l()(),t.wb(34,0,null,0,2,"div",[["padding",""],["slot","start"]],null,null,null,null,null)),t.vb(35,16384,null,0,r.c,[t.k],null,null),(l()(),t.Mb(-1,null,[" \ud83d\ude00 "])),(l()(),t.wb(37,0,null,0,6,"ion-input",[["placeholder","Type here..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0,o=l.component;return"ionBlur"===n&&(e=!1!==t.Hb(l,38)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==t.Hb(l,38)._handleInputEvent(u.target)&&e),"ngModelChange"===n&&(e=!1!==(o.chat=u)&&e),e}),c.z,c.j)),t.vb(38,16384,null,0,r.Jb,[t.k],null,null),t.Jb(1024,null,s.k,(function(l){return[l]}),[r.Jb]),t.vb(40,671744,null,0,s.p,[[8,null],[8,null],[8,null],[6,s.k]],{model:[0,"model"]},{update:"ngModelChange"}),t.Jb(2048,null,s.l,null,[s.p]),t.vb(42,16384,null,0,s.m,[[4,s.l]],null,null),t.vb(43,49152,null,0,r.E,[t.h,t.k,t.B],{placeholder:[0,"placeholder"]},null),(l()(),t.wb(44,0,null,0,2,"ion-icon",[["name","send"],["padding",""],["slot","end"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.sendChat()&&t),t}),c.x,c.h)),t.vb(45,49152,null,0,r.A,[t.h,t.k,t.B],{name:[0,"name"]},null),t.vb(46,16384,null,0,r.c,[t.k],null,null)],(function(l,n){var u=n.component;l(n,5,0,u.api.admin),l(n,15,0,"videocam"),l(n,18,0,"call"),l(n,21,0,u.api.admin),l(n,23,0,!u.api.admin),l(n,27,0,u.messages),l(n,29,0,u.loader),l(n,40,0,u.chat),l(n,43,0,"Type here..."),l(n,45,0,"send")}),(function(l,n){var u=n.component;l(n,13,0,null==u.user?null:u.user.name),l(n,37,0,t.Hb(n,42).ngClassUntouched,t.Hb(n,42).ngClassTouched,t.Hb(n,42).ngClassPristine,t.Hb(n,42).ngClassDirty,t.Hb(n,42).ngClassValid,t.Hb(n,42).ngClassInvalid,t.Hb(n,42).ngClassPending)}))}function C(l){return t.Ob(0,[(l()(),t.wb(0,0,null,null,1,"app-chat-room",[],null,null,null,y,g)),t.vb(1,114688,null,0,o,[e.a,h.a,h.m],null,null)],(function(l,n){l(n,1,0)}),null)}var O=t.sb("app-chat-room",o,C,{},{},[]);u.d(n,"ChatRoomPageModuleNgFactory",(function(){return B}));var B=t.tb(i,[],(function(l){return t.Eb([t.Fb(512,t.j,t.eb,[[8,[a.a,O]],[3,t.j],t.z]),t.Fb(4608,b.m,b.l,[t.w,[2,b.x]]),t.Fb(4608,s.t,s.t,[]),t.Fb(4608,r.a,r.a,[t.B,t.g]),t.Fb(4608,r.Eb,r.Eb,[r.a,t.j,t.s]),t.Fb(4608,r.Hb,r.Hb,[r.a,t.j,t.s]),t.Fb(1073742336,b.c,b.c,[]),t.Fb(1073742336,s.s,s.s,[]),t.Fb(1073742336,s.i,s.i,[]),t.Fb(1073742336,r.Cb,r.Cb,[]),t.Fb(1073742336,h.p,h.p,[[2,h.u],[2,h.m]]),t.Fb(1073742336,i,i,[]),t.Fb(1024,h.k,(function(){return[[{path:"",component:o}]]}),[])])}))}}]);