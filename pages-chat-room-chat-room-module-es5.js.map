{"version":3,"sources":["./src/app/pages/chat-room/chat-room.page.html","./src/app/pages/chat-room/chat-room.module.ts","./src/app/pages/chat-room/chat-room.page.css","./src/app/pages/chat-room/chat-room.page.scss","./src/app/pages/chat-room/chat-room.page.ts"],"names":[],"mappings":"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","file":"pages-chat-room-chat-room-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n    <ion-toolbar _bg-theme-color style=\\\"background-color: #1e2023\\\">\\r\\n      <ion-icon *ngIf=\\\"api.admin\\\" slot=\\\"start\\\" name=\\\"arr ow-round-back\\\" padding style=\\\"padding-right: 0px\\\" (click)=\\\"goBack()\\\"></ion-icon>\\r\\n        <span slot=\\\"start\\\" padding >\\r\\n            <img style=\\\"height: 30px; width: 100px\\\" src=\\\"../../../assets/imgs/dema-big.png\\\">\\r\\n        </span>\\r\\n      <ion-title no-padding style=\\\" font-family: Montserrat\\\">{{ user?.name }}</ion-title>\\r\\n      <ion-icon name=\\\"videocam\\\" slot=\\\"end\\\" padding></ion-icon>\\r\\n      <ion-icon name=\\\"call\\\" slot=\\\"end\\\" padding></ion-icon>\\r\\n      <ion-icon *ngIf=\\\"api.admin\\\" name=\\\"more\\\" slot=\\\"end\\\" padding></ion-icon>\\r\\n      <ion-icon *ngIf=\\\"!api.admin\\\" name=\\\"log-out\\\" (click)=\\\"logout()\\\" slot=\\\"end\\\" padding></ion-icon>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n\\r\\n\\r\\n<ion-content bg-sky>\\r\\n  <div *ngFor=\\\"let mess of messages\\\">\\r\\n    <div flex flow-right *ngIf=\\\"mess.type==userType\\\">\\r\\n        <ion-card bg-light>\\r\\n            <ion-card-content style=\\\"padding-bottom: 0px; font-family: Montserrat\\\">\\r\\n            {{ mess.msg }}\\r\\n            </ion-card-content>\\r\\n        </ion-card>\\r\\n    </div>\\r\\n    <div flex *ngIf=\\\"mess.type!=userType\\\">\\r\\n        <ion-card bg-white-chat>\\r\\n            <ion-card-content style=\\\"padding-bottom: 0px; font-family: Montserrat\\\">\\r\\n            {{ mess.msg }}  \\r\\n            </ion-card-content>\\r\\n        </ion-card>\\r\\n    </div>\\r\\n  </div>\\r\\n  \\r\\n  <div *ngIf=\\\"loader\\\" flex v-center h-center style=\\\"height: 100%;\\\">\\r\\n      <ion-spinner name=\\\"crescent\\\" color=\\\"success\\\" style=\\\"width: 100px; height: 100px;\\\"></ion-spinner>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n<ion-footer>\\r\\n    <ion-toolbar>\\r\\n        <div slot=\\\"start\\\" padding>\\r\\n          ðŸ˜€\\r\\n        </div>\\r\\n        <ion-input [(ngModel)] = \\\"chat\\\" style=\\\" font-family: Montserrat\\\"\\r\\n          placeholder=\\\"Type here...\\\"\\r\\n        ></ion-input>\\r\\n        <ion-icon (click)=\\\"sendChat()\\\" name=\\\"send\\\" slot=\\\"end\\\" padding></ion-icon>\\r\\n    </ion-toolbar>\\r\\n</ion-footer>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChatRoomPage } from './chat-room.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatRoomPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ChatRoomPage]\r\n})\r\nexport class ChatRoomPageModule {}\r\n","module.exports = \"ion-card {\\n  width: 80%;\\n  border-radius: 15px;\\n}\\n\\n[flow-right] {\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: reverse;\\n          flex-flow: row-reverse;\\n}\\n\\nion-content {\\n  background: image(\\\"../../../assets/imgs/background.jpeg\\\");\\n}\\n\\n[bg-white-chat] {\\n  --background: #0a0a0a;\\n  --color: #ffc000;\\n}\\n\\n[bg-light] {\\n  --background: #f6b535;\\n  --color: #000;\\n}\\n\\n[light-time] {\\n  color: #6a6a6a;\\n  font-size: 0.7rem;\\n  padding: 5px;\\n}\\n\\n/*# sourceMappingURL=chat-room.page.css.map */\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhdC1yb29tL2NoYXQtcm9vbS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NoYXQtcm9vbS9jaGF0LXJvb20ucGFnZS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxVQUFBO0VBQ0EsbUJBQUE7QUNDSjs7QURDQTtFQUNJLDhCQUFBO0VBQUEsOEJBQUE7VUFBQSxzQkFBQTtBQ0VKOztBRENBO0VBQ0kseURBQUE7QUNFSjs7QURJQTtFQUNJLHFCQUFBO0VBQ0EsZ0JBQUE7QUNESjs7QURHQTtFQUNJLHFCQUFBO0VBQ0EsYUFBQTtBQ0FKOztBREVBO0VBQ0ksY0FBQTtFQUNBLGlCQUFBO0VBQ0EsWUFBQTtBQ0NKOztBQUVBLDZDQUE2QyIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYXQtcm9vbS9jaGF0LXJvb20ucGFnZS5jc3MifQ== */\"","module.exports = \"ion-card {\\n  width: 80%;\\n  border-radius: 15px;\\n}\\n\\n[flow-right] {\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: reverse;\\n          flex-flow: row-reverse;\\n}\\n\\nion-content {\\n  background: image(\\\"../../../assets/imgs/background.jpeg\\\");\\n}\\n\\n[bg-white-chat] {\\n  --background: #0a0a0a;\\n  --color: #ffc000;\\n}\\n\\n[bg-light] {\\n  --background: #f6b535;\\n  --color: #000;\\n}\\n\\n[light-time] {\\n  color: #6a6a6a;\\n  font-size: 0.7rem;\\n  padding: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhdC1yb29tL0Q6XFxBZGl5XFxpb25pYy1tZXNzZW5nZXItZmlyZWJhc2Uvc3JjXFxhcHBcXHBhZ2VzXFxjaGF0LXJvb21cXGNoYXQtcm9vbS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NoYXQtcm9vbS9jaGF0LXJvb20ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksVUFBQTtFQUNBLG1CQUFBO0FDQ0o7O0FEQ0E7RUFDSSw4QkFBQTtFQUFBLDhCQUFBO1VBQUEsc0JBQUE7QUNFSjs7QURDQTtFQUNJLHlEQUFBO0FDRUo7O0FESUE7RUFDSSxxQkFBQTtFQUNBLGdCQUFBO0FDREo7O0FER0E7RUFDSSxxQkFBQTtFQUNBLGFBQUE7QUNBSjs7QURFQTtFQUNJLGNBQUE7RUFDQSxpQkFBQTtFQUNBLFlBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYXQtcm9vbS9jaGF0LXJvb20ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQge1xyXG4gICAgd2lkdGg6IDgwJTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbn1cclxuW2Zsb3ctcmlnaHRdIHtcclxuICAgIGZsZXgtZmxvdzogcm93LXJldmVyc2U7XHJcbn1cclxuXHJcbmlvbi1jb250ZW50e1xyXG4gICAgYmFja2dyb3VuZDogaW1hZ2UoXCIuLi8uLi8uLi9hc3NldHMvaW1ncy9iYWNrZ3JvdW5kLmpwZWdcIik7XHJcbn1cclxuW2JnLXNreV0ge1xyXG5cclxuXHJcbn1cclxuW2JnLXdoaXRlLWNoYXRde1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjMGEwYTBhO1xyXG4gICAgLS1jb2xvcjogI2ZmYzAwMDtcclxufVxyXG5bYmctbGlnaHRdIHtcclxuICAgIC0tYmFja2dyb3VuZDogI2Y2YjUzNTtcclxuICAgIC0tY29sb3I6ICMwMDA7XHJcbn1cclxuW2xpZ2h0LXRpbWVdIHtcclxuICAgIGNvbG9yOiAjNmE2YTZhO1xyXG4gICAgZm9udC1zaXplOiAwLjdyZW07XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn1cclxuIiwiaW9uLWNhcmQge1xuICB3aWR0aDogODAlO1xuICBib3JkZXItcmFkaXVzOiAxNXB4O1xufVxuXG5bZmxvdy1yaWdodF0ge1xuICBmbGV4LWZsb3c6IHJvdy1yZXZlcnNlO1xufVxuXG5pb24tY29udGVudCB7XG4gIGJhY2tncm91bmQ6IGltYWdlKFwiLi4vLi4vLi4vYXNzZXRzL2ltZ3MvYmFja2dyb3VuZC5qcGVnXCIpO1xufVxuXG5bYmctd2hpdGUtY2hhdF0ge1xuICAtLWJhY2tncm91bmQ6ICMwYTBhMGE7XG4gIC0tY29sb3I6ICNmZmMwMDA7XG59XG5cbltiZy1saWdodF0ge1xuICAtLWJhY2tncm91bmQ6ICNmNmI1MzU7XG4gIC0tY29sb3I6ICMwMDA7XG59XG5cbltsaWdodC10aW1lXSB7XG4gIGNvbG9yOiAjNmE2YTZhO1xuICBmb250LXNpemU6IDAuN3JlbTtcbiAgcGFkZGluZzogNXB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ApiService } from 'src/app/api/api.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-room',\r\n  templateUrl: './chat-room.page.html',\r\n  styleUrls: ['./chat-room.page.scss','./chat-room.page.css'],\r\n})\r\nexport class ChatRoomPage implements OnInit {\r\n  user: any;\r\n  chat: string;\r\n  unsubscribe: any;\r\n  messages: any = [];\r\n  chatKeys: any = [];\r\n  userType: string;\r\n  loader: boolean = true;\r\n\r\n  constructor(\r\n      public api: ApiService,\r\n      private route: ActivatedRoute,\r\n      private router: Router\r\n  ) { \r\n    this.route.queryParamMap.subscribe(snap => { \r\n      this.user = snap['params'];\r\n      this.getChat();\r\n    });\r\n    this.userType = this.api.admin ? 'admin' : 'user';\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/home'], { skipLocationChange: false });\r\n  }\r\n\r\n  logout() {\r\n    console.log('lgout');\r\n    this.api.signOut();\r\n  }\r\n  \r\n  sendChat() {\r\n    this.chat ? console.log(this.chat) : '';\r\n\r\n    if(this.chat){\r\n      this.api.sendMsg(this.user.id, this.chat, this.userType);\r\n    }\r\n\r\n    this.chat = '';\r\n  }\r\n\r\n  getChat() {\r\n    console.log('get chat', this.user.id);\r\n    this.unsubscribe = this.api.db.collection(\"chatRoom\").where(\"id\", \"==\", this.user.id) \r\n    .onSnapshot((querySnapshot)=> {\r\n        this.loader = false;\r\n        querySnapshot.forEach((doc)=> {\r\n            // doc.data() is never undefined for query doc snapshots\r\n            let data = doc.data();\r\n            if(this.chatKeys.indexOf(data.key) < 0){\r\n              this.messages.push(data);\r\n              this.chatKeys.push(data.key);\r\n            }\r\n            console.log(doc.data());\r\n        });\r\n        this.messages.sort(this.sortDate);\r\n    });\r\n  }\r\n\r\n  sortDate(a, b) {\r\n    var dateA = new Date(a.timestamp.toDate());\r\n    var dateB = new Date(b.timestamp.toDate());\r\n    return dateA > dateB ? 1 : -1;  \r\n  };\r\n\r\n\r\n  ionViewWillLeave() {\r\n    this.api.admin ? this.unsubscribe() : '';\r\n    console.log('unsubscribe successfully');\r\n  }\r\n}\r\n"],"sourceRoot":""}